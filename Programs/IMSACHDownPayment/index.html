
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../DailyCreditQueueCounts/">
      
      
        <link rel="next" href="../IMSPegaTrainingRefresh/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.29">
    
    
      
        <title>IMS ACH DownPayment - Credit Team Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.76a95c52.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ims-ach-downpayment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Credit Team Docs" class="md-header__button md-logo" aria-label="Credit Team Docs" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Credit Team Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              IMS ACH DownPayment
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Welcome to the Credit Team Docs

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../CobolPrograms/IMSPrograms/" class="md-tabs__link">
          
  
  CobolPrograms

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../CatchLabelProcess/" class="md-tabs__link">
          
  
  Programs

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Credit Team Docs" class="md-nav__button md-logo" aria-label="Credit Team Docs" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Credit Team Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to the Credit Team Docs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CobolPrograms
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            CobolPrograms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CobolPrograms/IMSPrograms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IMS Programs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CobolPrograms/OnlinePrograms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Online Programs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Programs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Programs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CatchLabelProcess/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Catch Label Process
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DailyCreditQueueCounts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Daily Credit Queue Counts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    IMS ACH DownPayment
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    IMS ACH DownPayment
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api-overview" class="md-nav__link">
    <span class="md-ellipsis">
      API Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#down-payment-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Down Payment Rules
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../IMSPegaTrainingRefresh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IMS Pega Training Data Refresh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OrderHook/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OrderHook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Prequal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prequal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creditLimitDecisioning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CreditLimitDecisioning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    FraudService
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            FraudService
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../FraudService/FraudService/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../FraudService/FraudServiceMSI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FraudServiceMSI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../FraudService/GoodOrderCheck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GoodOrderCheck
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../FraudService/Kount/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kount
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../FraudService/Sift/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sift
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api-overview" class="md-nav__link">
    <span class="md-ellipsis">
      API Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#down-payment-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Down Payment Rules
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="ims-ach-downpayment">IMS ACH DownPayment</h1>
<h2 id="api-overview">API Overview</h2>
<p><strong>REPO:</strong><br />
ImsAchDownpayment</p>
<p><strong>Swagger link:</strong><br />
<a href="https://api.dev.sccompanies.com/dev-imsachdownpayment/swagger/index.html">https://api.dev.sccompanies.com/dev-imsachdownpayment/swagger/index.html</a></p>
<p><strong>IMS ACH DP API URL:</strong><br />
<a href="https://api.dev.sccompanies.com/dev-imsachdownpayment/api/ImsAchDownpayment">https://api.dev.sccompanies.com/dev-imsachdownpayment/api/ImsAchDownpayment</a></p>
<p><strong>S3 bucket:</strong><br />
dev-imsachdownpayment-east1<br />
dev-imsachdownpayment-east2 - nothing is written in it.</p>
<p><strong>Firehose Delivery streams:</strong> (delivery destination is always dev-imsachdownpayment-east1)<br />
dev-imsAchDpApiRequest<br />
dev-imsAchDpApiResponse<br />
dev-imsAchDpBlazeRequest<br />
dev-imsAchDpBlazeResponse</p>
<p><strong>Timestream database:</strong><br />
dev-ImsAchDownpayment</p>
<p><strong>Timestream tables:</strong><br />
dev-ImsAchDpApiRequest<br />
dev-ImsAchDpApiResponse<br />
dev-ImsAchDpBlazeRequest<br />
dev-ImsAchDpBlazeResponse</p>
<p><strong>Lambda:</strong><br />
dev-ImsAchDownpayment</p>
<p><strong>SNS Topic:</strong><br />
dev-IMSACHDownpaymentSNS</p>
<p><strong>Query for test data:</strong>  </p>
<pre><code>select concat(ath.BATCH_NO, ath.ORDER_SEQ, ath.ORDER_FILL) as ORDER_NO, ath.SUB_COMP_CD, ath.CORPORATE_CD, ord.CUSTOMER_NO, concat(ath.STATUS_CD, ath.STATUS_NO) as STATUS_CD, ath.DOWNPAY_OFFER_PCT, ath.DOWNPAY_AMT, ord.AMOUNT_DUE, ord.BATCH_DATE, ath.LTR_DISC_CD, ath.TRK_SUSPEND_CD, ath.TRK_RELEASE_CD
from IMS_AUTH as ath
inner join IMS_ORDER as ord on (ath.BATCH_NO = ord.BATCH_NO and ath.ORDER_SEQ = ord.ORDER_SEQ and ath.ORDER_FILL = ord.ORDER_FILL)
inner join IMS_CUSTOMER as cus on (ord.CUSTOMER_NO = cus.CUSTOMER_NO)
where ath.STATUS_CD = 'W' 
and ath.STATUS_NO = '05'
and ath.DOWNPAY_OFFER_PCT &gt; '0.00' and ath.DOWNPAY_OFFER_PCT &lt; '0.50'
and ath.ADD_DATE &gt; 20230901
limit 100;
</code></pre>
<h2 id="down-payment-rules">Down Payment Rules</h2>
<p>IMS ACH Down Payment Rules:</p>
<p>Customer with '0' credit limit and order in held status are not allowed to make ACH payment.</p>
<pre><code>        select concat(ath.BATCH_NO, ath.ORDER_SEQ) as orderNbr, 
        cus.CUSTOMER_NO as customerNbr, 
        cus.CREDIT_LIMIT as customerLimit,
        concat(ath.STATUS_CD, ath.STATUS_NO) as authStatus, 
        ath.TRK_RELEASE_CD as trkReleaseCd, 
        ath.DOWNPAY_AMT as downPaymentAmt, 
        ath.DOWNPAY_OFFER_PCT as downPaymentOfferPct,
        ord.REMITTANCE as remittanceAmt,
        ord.BALANCE_DUE as balanceDue
        from IMS_AUTH as ath 
        inner join IMS_ORDER as ord on ath.BATCH_NO = ord.BATCH_NO and ath.ORDER_SEQ = ord.ORDER_SEQ
        inner join IMS_CUSTOMER as cus on cus.CUSTOMER_NO = ord.CUSTOMER_NO
        where (ath.STATUS_CD = 'P' or 'W') and cus.CREDIT_LIMIT = 0
        order by ath.SEQUENCE_ID_KEY desc
        limit 5;
</code></pre>
<p>If BLOCK_ACH_CD = 'Y' for customer on IR_CUSTOMER, ACH transaction not allowed.</p>
<pre><code>    select CUSTOMER_NO, BLOCK_ACH_CD from IR_CUSTOMER where BLOCK_ACH_CD = 'Y' order by SEQUENCE_ID_KEY desc limit 1;

    select CUSTOMER_NO, BLOCK_ACH_CD from IR_CUSTOMER where CUSTOMER_NO = '71022645608';
</code></pre>
<p>If customer not found in on IR_CUSTOMER, ACH transaction not allowed.</p>
<p>If customer not found on IMS_CUS_SCORES table or if found customer, but Experian score and Equifax-score-10 is zero then ACH payment not allowed.</p>
<pre><code>    select CUSTOMER_NO, COMPANY_CD, EXPERIAN_SCORE, EQUIFAX_SCORE_10 
    from IMS_CUS_SCORES 
    where EXPERIAN_SCORE = 0 and EQUIFAX_SCORE_10 = 0 
    order by SEQUENCE_ID_KEY desc
    limit 10;

    select CUSTOMER_NO, COMPANY_CD, EXPERIAN_SCORE, EQUIFAX_SCORE_10 
    from IMS_CUS_SCORES 
    where CUSTOMER_NO = '2099669596' and COMPANY_CD = '02';
</code></pre>
<p>Only two ACH payment allowed to customer per company per season</p>
<pre><code>    select CUSTOMER_NO, concat(SUB_COMP_CD, CORPORATE_CD) as companyCd, ACH_COUNT from IMS_CUSTOMER 
    where ACH_COUNT &gt; 2 
    order by SEQUENCE_ID_KEY desc 
    limit 2;

    select CUSTOMER_NO, ACH_COUNT from IMS_CUSTOMER
    where CUSTOMER_NO = '2099669359' and SUB_COMP_CD = '0' and CORPORATE_CD = '2' ;
</code></pre>
<p>Can not accept ACH payment &gt; $200</p>
<p>ACH not allowed if customer marked fraud in IR_CUSTOMER</p>
<pre><code>    select CUSTOMER_NO, concat(SUB_COMP_CD, CORPORATE_CD) as companyCd, BAD_DEBT_CD from IMS_CUSTOMER 
    where BAD_DEBT_CD = 'F' 
    order by SEQUENCE_ID_KEY desc 
    limit 2;
    select CUSTOMER_NO, concat(SUB_COMP_CD, CORPORATE_CD) as companyCd, BAD_DEBT_CD from IMS_CUSTOMER
    where CUSTOMER_NO = '2099669359' and SUB_COMP_CD = '0' and CORPORATE_CD = '2' ;
</code></pre>
<p>ACH payment allowed only on held order, so if STATUS_CD != 'P' or 'W' or 'H', ACH payments not allowed. STATUS_CD in IMS_AUTH</p>
<p>If down payment amount is less than minimum down payment required, then ACH payment is not allowed.</p>
<pre><code>        COMPUTE WS-MINIMUM-PAYMENT
                   = (ORD-BALANCE-DUE * WS-REQUESTED-PERCENT)
</code></pre>
<pre><code>Note - 
From IMS_AUTH, we can get DOWNPAY_OFFER_PCT, and DOWNPAY_AMT
From IMS_ORDER , we can get BALANCE_DUE
</code></pre>
<p>Down payment amount cannot be more than order BALANCE_DUE. (We can get BALANCE_DUE from COP_ORDER)
ACH is allowed with checking or saving account type
*Check for ACH transaction in AR transaction file. If there is pending transaction, payments not allowed. We might need to review this scenario.</p>
<hr />
<p>Following are my are additional findings on ACH down payment rules for outside clients for specific message type on screen(highlighted):</p>
<p>'SPEED PAY OPTION NOT AVAILABLE' results on following screens, when order in Process/pend or Waiting status and customer credit limit is zero.</p>
<p>DSO screen (Program – IOL324)
CSR screen (Program – IOL341)
AUTH screen (Program – IOL347)</p>
<p>Example:</p>
<p>'ACH PAYMENT OPTION NOT AVAILABLE' results on CSR screen (Program -IOL341) under various conditions which are checked in program IMM239and they are as follows:
    - If AR blocked ACH payment on AR_CUSTOMER table
    - If customer not found on COP_CUS_SCORES table or if found customer, but Experian score and Equifax-score-10 is zero.
    - There is another rule for corporate code ‘4’, only two ACH payment allowed, I think this not relevant anymore.
    - At some point for outside clients ACH payment over 200 wasn’t accepted thru screen, they were asked to mail the check, not sure if that is still applicable (Found in program IOL337).</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../DailyCreditQueueCounts/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Daily Credit Queue Counts">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Daily Credit Queue Counts
              </div>
            </div>
          </a>
        
        
          
          <a href="../IMSPegaTrainingRefresh/" class="md-footer__link md-footer__link--next" aria-label="Next: IMS Pega Training Data Refresh">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                IMS Pega Training Data Refresh
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>